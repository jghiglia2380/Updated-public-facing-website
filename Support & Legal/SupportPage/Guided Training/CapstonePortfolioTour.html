import React, { useState, useEffect, useRef } from "react";

const sections = [
  {
    id: "intro",
    title: "Welcome to Your Portfolio Showcase",
    content:
      "This guided tour walks through the full student portfolio you've built across PFL Academy. It's designed to help you reflect on your growth and prepare for interviews, applications, and real-world opportunities.",
  },
  {
    id: "career",
    title: "Career Planning & Goals",
    content:
      "You selected a long-term career path, defined your SMART goals, and planned key milestones with the Career Path Planner. These goals appear on your resume and help shape your educational choices.",
  },
  {
    id: "education",
    title: "FAFSA & Education Financing",
    content:
      "Through the FAFSA Navigator, you walked through a real scenario of applying for federal aid. You also compared student loan options and created an education budget aligned with your income outlook.",
  },
  {
    id: "banking",
    title: "Banking & Accounts",
    content:
      "You compared checking accounts, opened a mock account, and practiced managing your funds — including auto-pay, deposits, and balance tracking. These habits are documented in your account reflections.",
  },
  {
    id: "investing",
    title: "Investment Strategy",
    content:
      "You used the Investing Skill Builder to experiment with stocks, ETFs, and diversification. You also recorded your risk tolerance and investment goals — all included in your personal finance summary.",
  },
  {
    id: "protection",
    title: "Insurance & Fraud Protection",
    content:
      "You explored renter’s insurance, auto coverage, and identity protection. Your choices and rationale are included in your portfolio for real-world preparedness.",
  },
  {
    id: "credit",
    title: "Credit & Debt Management",
    content:
      "From choosing a first credit card to learning about debt snowballs, your credit knowledge is tracked through simulations and reflections. These entries show you understand how to manage credit responsibly.",
  },
  {
    id: "resume",
    title: "Final Resume",
    content:
      "Your resume pulls from the entire course — career goals, job experiences, and your accomplishments from simulations. Download your polished PDF resume from the builder and use it anywhere!",
  },
  {
    id: "summary",
    title: "Capstone Summary",
    content:
      "You’ve completed a full tour of your portfolio. Whether applying for jobs, scholarships, or just reflecting on your progress, this portfolio tells your financial literacy story — and it’s just getting started.",
  },
];

export default function CapstonePortfolioTour() {
  const [step, setStep] = useState(0);
  const currentRef = useRef(null);

  useEffect(() => {
    if (currentRef.current) {
      currentRef.current.scrollIntoView({ behavior: "smooth", block: "center" });
    }
  }, [step]);

  return (
    <div className="bg-gradient-to-br from-indigo-50 via-white to-purple-50 py-12">
      <div className="max-w-6xl mx-auto px-6">
        <div className="bg-gradient-to-r from-indigo-700 via-purple-700 to-indigo-800 text-white text-center p-8 rounded-t-2xl shadow-xl">
          <h1 className="text-4xl font-bold">PFL Capstone Portfolio Tour</h1>
          <p className="mt-3 text-base max-w-2xl mx-auto">
            Explore how your personal finance journey comes together — one section at a time.
          </p>
        </div>

        <div className="space-y-10 mt-12">
          {sections.map((section, index) => (
            <div
              key={section.id}
              ref={step === index ? currentRef : null}
              className={`p-6 bg-white border-l-8 transition-all duration-500 ease-in-out rounded-2xl shadow-lg ${
                step === index
                  ? "border-indigo-600 ring-4 ring-indigo-300"
                  : "border-gray-200 opacity-60"
              }`}
            >
              <h3 className="text-2xl font-semibold text-indigo-800 mb-2">{section.title}</h3>
              <p className="text-gray-700 text-base leading-relaxed">{section.content}</p>
            </div>
          ))}
        </div>

        <div className="fixed bottom-6 left-1/2 transform -translate-x-1/2 z-50 bg-white/90 border border-indigo-100 rounded-full shadow-lg px-6 py-3 flex items-center gap-6 max-w-lg w-full justify-between">
  <button
    onClick={() => setStep((s) => Math.max(s - 1, 0))}
    disabled={step === 0}
    className="px-4 py-2 bg-gray-200 text-gray-800 rounded-full font-medium disabled:opacity-50"
  >
    ← Back
  </button>
  <span className="text-sm text-gray-500">
    Step {step + 1} of {sections.length}
  </span>
  <button
    onClick={() => setStep((s) => Math.min(s + 1, sections.length - 1))}
    disabled={step === sections.length - 1}
    className="px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-full shadow font-medium disabled:opacity-50"
  >
    Next →
  </button>
</div>
      </div>
    </div>
  );
}
